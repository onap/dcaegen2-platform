<!-- 
  # ============LICENSE_START=======================================================
  # Copyright (c) 2020 AT&T Intellectual Property. All rights reserved.
  # ================================================================================
  # Licensed under the Apache License, Version 2.0 (the "License");
  # you may not use this file except in compliance with the License.
  # You may obtain a copy of the License at
  #
  #      http://www.apache.org/licenses/LICENSE-2.0
  #
  # Unless required by applicable law or agreed to in writing, software
  # distributed under the License is distributed on an "AS IS" BASIS,
  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  # See the License for the specific language governing permissions and
  # limitations under the License.
  # ============LICENSE_END=========================================================
 -->

<p-card header="Password Reset" [style]="{margin:'100px 300px 500px 300px'}">
    <hr class="line-break">
    <form [formGroup]="form" (ngSubmit)="submit()" class="p-5 bg-faded" style="margin-left: 200px;margin-bottom: 100px;">
        <div class="ui-g ui-fluid" >
            <div class="ui-g-12 ui-md-4">
                <div class="ui-inputgroup" >
                    <span class="ui-inputgroup-addon"><i class="pi pi-user" style="line-height: 1.25;"></i></span>
                    <input type="text" pInputText placeholder="User id" formControlName="id" >         
                </div>
            </div>
        </div>
        <div *ngIf="!authService.isAdmin; else admin">
        <div class="ui-g ui-fluid">
            <div class="ui-g-12 ui-md-4">
                <div class="ui-inputgroup" >
                    <span class="ui-inputgroup-addon"><i class="pi pi-key" style="line-height: 1.25;"></i></span>
                    <input type="text" pInputText placeholder="New Password" formControlName="newPassword">         
                </div>
            </div>
        </div>
        <div class="ui-g ui-fluid">
            <div class="ui-g-12 ui-md-4">
                <div class="ui-inputgroup" >
                    <span class="ui-inputgroup-addon"><i class="pi pi-key" style="line-height: 1.25;"></i></span>
                    <input type="text" pInputText placeholder="Confirm Password" formControlName="confirm_newPassword">         
                </div>
            </div>
        </div>
        </div>
        <ng-template class="ui-g ui-fluid" #admin>
            <div class="ui-g-12 ui-md-4">
                <div class="ui-inputgroup">
                <input type="text" pInputText formControlName="password" placeholder="generate password">   
                <button pButton type="button" icon="pi pi-refresh" class="ui-button-warn" (click)="generateNewPassword()" ></button>      
                </div>
            </div>
        </ng-template>
        <p-footer class="text-left ui-g-12">
            <button pButton type="button" class="ui-button-info" label="Cancel" (click)="cancel()" style="margin-right: .25em"></button>
            <button pButton type="submit" class="ui-button-success" label="Login" [disabled]="!form.valid"></button>
        </p-footer>
        <div class="text-left ui-g-12">
            <a routerLink="/register">Not a registered user? Click here to register now!</a> 
        </div>
      </form>
    </p-card>
